"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[640],{71:(e,r,t)=>{t.d(r,{h:()=>n});let s={inferno:"inferno",holliday:"astro",paradox:"chrono",orion:"archer",ghost:"spectre",vindicta:"hornet",seven:"gigawatt",atlas:"bull",forge:"engineer",dynamo:"sumo",calico:"nano",krill:"digger",fathom:"slork",pocket:"synth","the boss":"yakuza",viper:"kali","generic person":"genericperson","lady geist":"spectre","mo and krill":"digger",infernus:"inferno",mcginnis:"engineer","grey talon":"archer",ivy:"tengu",abrams:"bull"};function n(e){let r=e.toLowerCase();return s[r]?s[r]:r.replace(/\s+/g,"")}},640:(e,r,t)=>{t.r(r),t.d(r,{default:()=>f});var s=t(5155),n=t(2115),a=t(9232),o=t(5565),i=t(8173),c=t.n(i),l=t(4957),d=t(71),m=t(6046),h=t(3116),u=t(3341);let g="previousPath",x="selectedPartners",p="filtersCleared";function f(e){let{characterName:r}=e,[t,i]=(0,n.useState)(null),[f,v]=(0,n.useState)([]),[w,b]=(0,n.useState)([]),[y,j]=(0,n.useState)(!0),[N,k]=(0,n.useState)(null),[S,I]=(0,n.useState)(!0),[C,_]=(0,n.useState)([]),E=(0,m.usePathname)(),P=(0,m.useRouter)(),[L,z]=(0,n.useState)(0);if((0,n.useEffect)(()=>{(async function(){try{j(!0);let e=await (0,u.Mq)(),t=(0,u.w)(e);b(t);let s=decodeURIComponent(r),n=t.find(e=>e.name.toLowerCase()===s.toLowerCase());if(!n){k("Character not found"),j(!1);return}i(n);let a=(0,u.TM)(e,n.name);v(a),j(!1)}catch(e){console.error("Error loading character data:",e),k("Failed to load character data"),j(!1)}})()},[r]),(0,n.useEffect)(()=>{{let e=()=>{sessionStorage.setItem(g,E)};window.addEventListener("beforeunload",e);let r="true"===sessionStorage.getItem(p);if(!r&&t){let e=sessionStorage.getItem(x);if(e)try{let r=JSON.parse(e);if(Array.isArray(r)){let e=r.filter(e=>t.conversationPartners.includes(e));_(e)}}catch(e){console.error("Error parsing selected partners:",e)}}else r&&sessionStorage.removeItem(p);return()=>{window.removeEventListener("beforeunload",e)}}},[E,t]),(0,n.useEffect)(()=>{C.length>0?sessionStorage.setItem(x,JSON.stringify(C)):sessionStorage.removeItem(x)},[C]),y)return(0,s.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(N||!t)return(0,s.jsxs)("div",{className:"bg-red-900/30 border border-red-800 rounded-lg p-4 text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-red-300 mb-2",children:"Error"}),(0,s.jsx)("p",{className:"text-red-200",children:N||"Character not found"}),(0,s.jsx)(c(),{href:"/",className:"mt-4 inline-block text-blue-400 hover:underline",children:"Return to Home"})]});let M=(0,l.v)(t.name),B=[...f.filter(e=>{if(!S&&!e.is_complete)return!1;if(C.length>0){let r=e.character1===t.name?e.character2:e.character1;return C.includes(r)}return!0})].sort((e,r)=>{if(e.is_complete&&!r.is_complete)return -1;if(!e.is_complete&&r.is_complete)return 1;let s=e.character1===t.name?e.character2:e.character1,n=r.character1===t.name?r.character2:r.character1;return s.localeCompare(n)}),G=e=>{let r=(0,d.h)(e);return"/minimapIcons/".concat(r,"_mm_psd.png")},T=e=>{_(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])},A=e=>{sessionStorage.setItem(g,E),P.push("/conversations/".concat(e))};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)(c(),{href:"/",className:"inline-flex items-center text-blue-400 hover:underline",onClick:()=>{sessionStorage.setItem(g,"/"),sessionStorage.removeItem(x),sessionStorage.setItem(p,"true")},children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back to Home"]}),(0,s.jsxs)("button",{onClick:()=>{sessionStorage.setItem(g,"/conversations"),sessionStorage.removeItem(x),sessionStorage.setItem(p,"true"),P.push("/conversations")},className:"inline-flex items-center text-blue-400 hover:underline bg-transparent border-none cursor-pointer",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Go to Search"]})]})}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 mb-8",children:[(0,s.jsx)("div",{className:"w-full md:w-1/3 lg:w-1/4 md:h-screen md:sticky md:top-0 md:self-start",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 overflow-y-auto h-auto md:max-h-[calc(100vh-2rem)] md:my-4",children:[(0,s.jsx)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:(0,s.jsx)(o.default,{src:G(t.name),alt:"".concat(M," portrait"),fill:!0,sizes:"128px",className:"object-cover rounded-full",onError:e=>{e.target.src="/minimapIcons/genericperson_mm_psd.png"}})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-white text-center mb-4",children:M}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-white mb-3",children:"Conversation Partners"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[C.length>0&&(0,s.jsx)("button",{onClick:()=>{_([]),sessionStorage.setItem(p,"true"),sessionStorage.removeItem(x)},className:"px-3 py-1 bg-blue-600 text-white rounded-full text-sm",children:"Clear All Filters"}),t.conversationPartners.map(e=>(0,s.jsxs)("button",{onClick:()=>T(e),className:"px-3 py-1 rounded-full text-sm flex items-center ".concat(C.includes(e)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[(0,s.jsx)("div",{className:"relative w-4 h-4 mr-1",children:(0,s.jsx)(o.default,{src:G(e),alt:(0,l.v)(e),fill:!0,sizes:"16px",className:"object-cover rounded-full",onError:e=>{e.target.src="/minimapIcons/genericperson_mm_psd.png"}})}),(0,l.v)(e)]},e))]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-white mb-3",children:"Filters"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"showIncomplete",checked:S,onChange:()=>I(!S),className:"mr-2"}),(0,s.jsx)("label",{htmlFor:"showIncomplete",className:"text-gray-300",children:"Show Incomplete Conversations"})]})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("button",{onClick:()=>{(0,h.B2)(t.name,f),window.location.reload()},className:"w-full px-4 py-2 bg-gray-700 text-gray-300 rounded hover:bg-gray-600 transition",children:"Reset Viewed Status"})})]})}),(0,s.jsxs)("div",{className:"w-full md:w-2/3 lg:w-3/4",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4",children:["Conversations ",C.length>0&&"with Selected Partners"]}),0===B.length?(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg p-6 text-center",children:(0,s.jsx)("p",{className:"text-gray-400",children:C.length>0?"No conversations found with the selected partners.":"No conversations found for this character."})}):(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:B.map(e=>(e.character1===t.name?e.character2:e.character1,(0,s.jsx)(a.A,{conversation:e,highlightCharacter:t.name,onClick:()=>A(e.conversation_id)},e.conversation_id)))})]})]})]})}},3116:(e,r,t)=>{t.d(r,{B2:()=>c,n0:()=>n,tG:()=>i,yV:()=>a});let s="viewedConversations";function n(e){try{let r=o();r.includes(e)||(r.push(e),localStorage.setItem(s,JSON.stringify(r)))}catch(e){console.error("Error marking conversation as viewed:",e)}}function a(e){try{return o().includes(e)}catch(e){return console.error("Error checking if conversation is viewed:",e),!1}}function o(){try{let e=localStorage.getItem(s);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting viewed conversations:",e),[]}}function i(){try{localStorage.removeItem(s)}catch(e){console.error("Error resetting viewed conversations:",e)}}function c(e,r){try{let t=o(),n=r.filter(r=>r.character1===e||r.character2===e).map(e=>e.conversation_id),a=t.filter(e=>!n.includes(e));localStorage.setItem(s,JSON.stringify(a))}catch(e){console.error("Error resetting character viewed conversations:",e)}}},3341:(e,r,t)=>{async function s(){try{{let e=await fetch("/Sample.json");if(!e.ok)throw Error("Failed to load data: ".concat(e.status," ").concat(e.statusText));return await e.json()}}catch(e){return console.error("Error loading conversation data:",e),{conversations:[],export_date:new Date().toISOString(),total_conversations:0}}}function n(e){if(!e.conversations||0===e.conversations.length)return[];let r=new Map;return e.conversations.forEach(e=>{var t,s;let n=e.character1,a=e.character2;r.has(n)||r.set(n,new Set),r.has(a)||r.set(a,new Set),null===(t=r.get(n))||void 0===t||t.add(a),null===(s=r.get(a))||void 0===s||s.add(n)}),Array.from(r.entries()).map(e=>{let[r,t]=e;return{name:r,iconPath:"/minimapIcons/".concat(r,"_mm_psd.png"),conversationPartners:Array.from(t)}})}function a(e,r){return e.conversations.filter(e=>e.character1===r||e.character2===r)}function o(e,r){let t=r.toLowerCase();return e.conversations.filter(e=>e.lines.some(e=>e.transcription.toLowerCase().includes(t))||e.summary.toLowerCase().includes(t))}function i(e,r){return e.conversations.find(e=>e.conversation_id===r)}t.d(r,{DI:()=>o,Mq:()=>s,TM:()=>a,mo:()=>i,w:()=>n}),new Date().toISOString()},4957:(e,r,t)=>{t.d(r,{v:()=>n});let s={inferno:"Infernus",gigawatt:"Seven",hornet:"Vindicta",ghost:"Lady Geist",tempest:"Tempest",atlas:"Abrams",wraith:"Wraith",forge:"McGinnis",chrono:"Paradox",sumo:"Dynamo",kelvin:"Kelvin",haze:"Haze",astro:"Holliday",bebop:"Bebop",nano:"Calico",orion:"Grey Talon",krill:"Mo and Krill",shiv:"Shiv",tengu:"Ivy",kali:"Kali",warden:"Warden",yamato:"Yamato",butcher:"Butcher",lash:"Lash",akimbo:"Akimbo",viscous:"Viscous",ballista:"Ballista",gunslinger:"Gunslinger",yakuza:"The Boss",spade:"Spade",genericperson:"Generic Person",tokamak:"Tokamak",wrecker:"Wrecker",rutger:"Rutger",synth:"Pocket",thumper:"Thumper",mirage:"Mirage",slork:"Fathom",cadence:"Cadence",targetdummy:"Target Dummy",bomber:"Bomber",viper:"Vyper","generic person":"Generic Person",generic:"Generic Person",mo:"Mo and Krill","the boss":"The Boss","grey talon":"Grey Talon","lady geist":"Lady Geist"};function n(e){return s[e.toLowerCase()]?s[e.toLowerCase()]:e.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}},6046:(e,r,t)=>{var s=t(6658);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},9232:(e,r,t)=>{t.d(r,{A:()=>l});var s=t(5155),n=t(2115),a=t(5565),o=t(4957),i=t(71),c=t(3116);let l=e=>{let{conversation:r,highlightCharacter:t,onClick:l}=e,{conversation_id:d,character1:m,character2:h,is_complete:u,missing_parts:g,summary:x,lines:p}=r,[f,v]=(0,n.useState)(!1);(0,n.useEffect)(()=>{v((0,c.yV)(d))},[d]);let w=t?m===t?h:m:null,b=(0,o.v)(m),y=(0,o.v)(h),j=w?(0,o.v)(w):null,N=w?"Conversation with ".concat(j):"".concat(b," & ").concat(y),k=x||(p.length>0?p[0].transcription:"No preview available"),S=e=>{let r=(0,i.h)(e);return"/minimapIcons/".concat(r,"_mm_psd.png")};return(0,s.jsx)("div",{className:"\n        bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 p-4 mb-4 \n        ".concat(u?"":"border-l-4 border-yellow-600"," \n        ").concat(f?"opacity-70 bg-gray-900":""," \n        ").concat(l?"cursor-pointer hover:bg-gray-750":"","\n      "),onClick:l,role:l?"button":void 0,tabIndex:l?0:void 0,onKeyDown:e=>{l&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),l())},children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mr-4",children:t&&w?(0,s.jsx)("div",{className:"relative w-12 h-12",children:(0,s.jsx)(a.default,{src:S(w),alt:"".concat(j," portrait"),fill:!0,sizes:"48px",className:"object-cover rounded-full ".concat(f?"opacity-70":""),onError:e=>{e.target.src="/minimapIcons/genericperson_mm_psd.png"}})}):(0,s.jsxs)("div",{className:"flex -space-x-3",children:[(0,s.jsx)("div",{className:"relative w-12 h-12 z-10",children:(0,s.jsx)(a.default,{src:S(m),alt:"".concat(b," portrait"),fill:!0,sizes:"48px",className:"object-cover rounded-full border-2 border-gray-800 ".concat(f?"opacity-70":""),onError:e=>{e.target.src="/minimapIcons/genericperson_mm_psd.png"}})}),(0,s.jsx)("div",{className:"relative w-12 h-12 z-0",children:(0,s.jsx)(a.default,{src:S(h),alt:"".concat(y," portrait"),fill:!0,sizes:"48px",className:"object-cover rounded-full border-2 border-gray-800 ".concat(f?"opacity-70":""),onError:e=>{e.target.src="/minimapIcons/genericperson_mm_psd.png"}})})]})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:N}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-1 line-clamp-3",children:k}),(0,s.jsxs)("div",{className:"flex items-center mt-2",children:[!u&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-800 text-yellow-100 mr-2",children:"Incomplete"}),g.length>0&&(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-800 text-red-100",children:["Missing parts: ",g.join(", ")]}),f&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-800 text-blue-100 ml-auto",children:"Viewed"})]})]})]})})}}}]);